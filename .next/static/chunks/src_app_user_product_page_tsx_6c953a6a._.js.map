{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FPOLY/ky5/ASM_Next/Pure-Botanica/src/app/user/product/page.tsx"],"sourcesContent":["\"use client\";\r\nimport \"./product.css\";\r\nimport Link from \"next/link\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Image from \"next/image\";\r\n\r\ninterface Product {\r\n  _id: string;\r\n  name: string;\r\n  price: number;\r\n  images: string[];\r\n}\r\n\r\ninterface MenuItem {\r\n  title: string;\r\n  subItems?: string[];\r\n}\r\n\r\n\r\n// Hàm chuẩn hóa URL hình ảnh\r\nconst getImageUrl = (image: string): string => {\r\n  if (image.startsWith(\"/\")) return image;\r\n  return `/images/${image}`;\r\n};\r\n\r\nexport default function ProductPage() {\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [currentPage, setCurrentPage] = useState<number>(1);\r\n  const [openSubMenu, setOpenSubMenu] = useState<string | null>(null);\r\n  const [filteredProducts, setFilteredProducts] = useState<Product[]>([]);\r\n  const productsPerPage = 9;\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      try {\r\n        const res = await fetch(\"https://db-pure-bonanica.onrender.com/products\");\r\n        const data: Product[] = await res.json();\r\n        setProducts(data);\r\n        setFilteredProducts(data);\r\n      } catch (error) {\r\n        console.error(\"Lỗi khi tải sản phẩm:\", error);\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  // Phân trang\r\n  const totalPages = Math.ceil(filteredProducts.length / productsPerPage);\r\n  const indexOfLast = currentPage * productsPerPage;\r\n  const indexOfFirst = indexOfLast - productsPerPage;\r\n  const currentProducts = filteredProducts.slice(indexOfFirst, indexOfLast);\r\n\r\n  useEffect(() => {\r\n    if (currentPage > totalPages && totalPages > 0) {\r\n      setCurrentPage(totalPages);\r\n    }\r\n  }, [filteredProducts, currentPage, totalPages]);\r\n\r\n  const menuItems: MenuItem[] = [\r\n    { title: \"Trang điểm\", subItems: [\"Son dưỡng môi\", \"Son màu không chì\", \"Tẩy da chết môi\", \"Kem nền\", \"Kem má\"] },\r\n    { title: \"Chăm sóc da\", subItems: [\"Tẩy trang - rửa mặt\", \"Toner - xịt khoáng\", \"Dưỡng da\", \"Kem chống nắng\"] },\r\n    { title: \"Chăm sóc cơ thể\", subItems: [\"Xà bông thiên nhiên\", \"Sữa tắm thiên nhiên\", \"Dưỡng thể\", \"Tẩy da chết body\", \"Chăm sóc răng miệng\"] },\r\n    { title: \"Chăm sóc tóc\", subItems: [\"Dầu gội\", \"Dầu xả\"] },\r\n    { title: \"Hương thơm\", subItems: [\"Tinh dầu nguyên chất\", \"Tinh dầu trị liệu\", \"Nước hoa khô\", \"Nước hoa dạng xịt\"] },\r\n    { title: \"Em bé\", subItems: [\"Tắm em bé\", \"Chăm sóc bé\"] },\r\n  ];\r\n\r\n  const toggleSubMenu = (title: string) => {\r\n    setOpenSubMenu(openSubMenu === title ? null : title);\r\n  };\r\n\r\n  const filterProducts = (subItem: string) => {\r\n    const filtered = products.filter((p) => p.name.includes(subItem));\r\n    setFilteredProducts(filtered.length > 0 ? filtered : products);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const getRandomProducts = (arr: Product[], count: number): Product[] => {\r\n    return [...arr].sort(() => 0.5 - Math.random()).slice(0, count);\r\n  };\r\n\r\n  const bestSellingProducts = getRandomProducts(products, 6);\r\n\r\n  return (\r\n    <div>\r\n      <section className=\"productBanner\">\r\n        <img src=\"/images/productBanner.png\" alt=\"Banner\" />\r\n      </section>\r\n\r\n      <h1 className=\"productTitle\">Danh sách sản phẩm</h1>\r\n      <div className=\"containerBox\">\r\n        <aside className=\"productSidebar\">\r\n          <h3>DANH MỤC SẢN PHẨM</h3>\r\n          <ul className=\"menu\">\r\n            {menuItems.map((item) => (\r\n              <li\r\n                key={item.title}\r\n                className={item.subItems ? \"sub-menu1\" : \"\"}\r\n                onClick={item.subItems ? () => toggleSubMenu(item.title) : undefined}\r\n              >\r\n                <i\r\n                  className=\"fa-solid fa-caret-down\"\r\n                  style={{ transform: openSubMenu === item.title ? \"rotate(0deg)\" : \"rotate(-90deg)\" }}\r\n                ></i>{\" \"}\r\n                {item.title}\r\n                {item.subItems && openSubMenu === item.title && (\r\n                  <ul className=\"sub-menu\">\r\n                    {item.subItems.map((subItem) => (\r\n                      <li key={subItem} onClick={() => filterProducts(subItem)}>\r\n                        - {subItem}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                )}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </aside>\r\n\r\n        <section className=\"productContainer max-w-6xl mx-auto py-8\">\r\n          <div className=\"productGrid grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6\">\r\n            {currentProducts.length > 0 ? (\r\n              currentProducts.map((product) => (\r\n                <Link href={`/user/detail/${product._id}`} key={product._id}>\r\n                  <div className=\"productItem bg-white shadow-md rounded-lg overflow-hidden\">\r\n                    <Image\r\n                      src={getImageUrl(product.images?.[0] || \"\")}\r\n                      alt={product.name}\r\n                      width={300}\r\n                      height={200}\r\n                      className=\"w-full h-48 object-cover\"\r\n                    />\r\n                    <div className=\"p-4\">\r\n                      <h4 className=\"text-lg font-semibold text-gray-800\">{product.name}</h4>\r\n                      <div className=\"product-card flex justify-between items-center mt-2\">\r\n                        <p className=\"price text-red-500 font-bold\">{(product.price)}</p>\r\n                        <span className=\"text-gray-600 hover:text-green-500\">\r\n                          <i className=\"fas fa-shopping-cart cartIcon\"></i>\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Link>\r\n              ))\r\n            ) : (\r\n              <p className=\"text-center col-span-full\">Đang tải sản phẩm...</p>\r\n            )}\r\n          </div>\r\n\r\n          {totalPages > 1 && (\r\n            <div className=\"productPagination flex justify-center mt-8 space-x-2\">\r\n              <button\r\n                className=\"page-btn px-4 py-2 bg-gray-200 rounded disabled:opacity-50\"\r\n                disabled={currentPage === 1}\r\n                onClick={() => setCurrentPage((prev) => prev - 1)}\r\n              >\r\n                Trước\r\n              </button>\r\n              {[...Array(totalPages)].map((_, index) => (\r\n                <button\r\n                  key={index + 1}\r\n                  className={`page-btn px-4 py-2 ${\r\n                    currentPage === index + 1 ? \"bg-blue-500 text-white\" : \"bg-gray-200\"\r\n                  } rounded`}\r\n                  onClick={() => setCurrentPage(index + 1)}\r\n                >\r\n                  {index + 1}\r\n                </button>\r\n              ))}\r\n              <button\r\n                className=\"page-btn px-4 py-2 bg-gray-200 rounded disabled:opacity-50\"\r\n                disabled={currentPage === totalPages}\r\n                onClick={() => setCurrentPage((prev) => prev + 1)}\r\n              >\r\n                Tiếp\r\n              </button>\r\n            </div>\r\n          )}\r\n        </section>\r\n      </div>\r\n\r\n      <div className=\"best-selling-products px-6 py-10\">\r\n        <h3 className=\"SliderTitle\">Có thể bạn sẽ thích</h3>\r\n        <div className=\"best-selling-grid grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mt-4\">\r\n          {bestSellingProducts.length > 0 ? (\r\n            bestSellingProducts.map((product) => (\r\n              <Link href={`/user/detail/${product._id}`} key={product._id}>\r\n                <div className=\"productItem bg-white shadow-md rounded-lg overflow-hidden\">\r\n                  <Image\r\n                    src={getImageUrl(product.images?.[0] || \"\")}\r\n                    alt={product.name}\r\n                    width={300}\r\n                    height={200}\r\n                    className=\"w-full h-48 object-cover\"\r\n                  />\r\n                  <div className=\"p-4\">\r\n                    <h4 className=\"text-lg font-semibold text-gray-800\">{product.name}</h4>\r\n                    <div className=\"product-card flex justify-between items-center mt-2\">\r\n                      <p className=\"price text-red-500 font-bold\">{(product.price)}</p>\r\n                      <span className=\"text-gray-600 hover:text-green-500\">\r\n                        <i className=\"fas fa-shopping-cart cartIcon\"></i>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n            ))\r\n          ) : (\r\n            <p>Đang tải sản phẩm...</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}