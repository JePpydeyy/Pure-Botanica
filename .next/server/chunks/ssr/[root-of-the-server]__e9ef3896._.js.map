{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FPOLY/ky5/ASM_Next/Pure-Botanica/src/app/admin/customer/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport \"./customer.css\";\r\n\r\nexport default function Customer() {\r\n  interface Customer {\r\n    _id: string;\r\n    username: string;\r\n    phone: string;\r\n    email: string;\r\n    address: string;\r\n    birthday: string | null;\r\n    listOrder: any[];\r\n    status: string;\r\n    role: string;\r\n    createdAt: string;\r\n  }\r\n\r\n  const [customers, setCustomers] = useState<Customer[]>([]);\r\n  const [selectedCustomer, setSelectedCustomer] = useState<Customer | null>(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  // Fetch dữ liệu khách hàng từ API khi component mount\r\n  useEffect(() => {\r\n    fetch(\"https://api-zeal.onrender.com/api/users\")\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        const filteredData = data.filter((customer: Customer) => customer.role === \"user\");\r\n        setCustomers(filteredData);\r\n      })\r\n      .catch((error) => console.error(\"Fetch error:\", error));\r\n  }, []);\r\n\r\n  // Mở modal khi chọn chỉnh sửa khách hàng\r\n  const openModal = (customer: Customer) => {\r\n    setSelectedCustomer(customer);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  // Cập nhật thông tin khách hàng\r\n  const updateCustomerInfo = async () => {\r\n    if (!selectedCustomer) return;\r\n\r\n    try {\r\n      const res = await fetch(`https://api-zeal.onrender.com/api/users/${selectedCustomer._id}`, {\r\n        method: \"PUT\",  // Sử dụng PUT để thay thế toàn bộ thông tin khách hàng\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          status: selectedCustomer.status,\r\n          role: selectedCustomer.role,\r\n          // Bạn có thể thêm các trường khác vào đây nếu cần\r\n        }),\r\n      });\r\n\r\n      if (!res.ok) throw new Error(\"Cập nhật thất bại\");\r\n\r\n      const updatedCustomer = await res.json(); // Nhận dữ liệu cập nhật từ API\r\n\r\n      // Cập nhật lại danh sách khách hàng trong state\r\n      setCustomers((prev) =>\r\n        prev.map((c) => (c._id === updatedCustomer._id ? updatedCustomer : c))\r\n      );\r\n\r\n      setIsModalOpen(false); // Đóng modal sau khi cập nhật thành công\r\n    } catch (err) {\r\n      console.error(\"Error:\", err);\r\n      alert(\"Có lỗi xảy ra, vui lòng thử lại!\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"title_container\">\r\n        <h1>KHÁCH HÀNG</h1>\r\n      </div>\r\n      <div className=\"table-container\">\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>Tên</th>\r\n              <th>Email</th>\r\n              <th>SĐT</th>\r\n              <th>Trạng thái</th>\r\n              <th>Vai trò</th>\r\n              <th>Ngày tạo</th>\r\n              <th>Hành động</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {customers.map((customer, index) => (\r\n              <tr key={customer._id}>\r\n                <td>{index + 1}</td>\r\n                <td>{customer.username}</td>\r\n                <td>{customer.email}</td>\r\n                <td>{customer.phone}</td>\r\n                <td>{customer.status}</td>\r\n                <td>{customer.role}</td>\r\n                <td>{new Date(customer.createdAt).toLocaleDateString()}</td>\r\n                <td>\r\n                  <button className=\"btn\" onClick={() => openModal(customer)}>Sửa</button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {isModalOpen && selectedCustomer && (\r\n        <div className=\"modal\">\r\n          <div className=\"modal-content\">\r\n            <h3>Chỉnh sửa thông tin khách hàng</h3>\r\n            <label>\r\n              Trạng thái:\r\n              <select\r\n                value={selectedCustomer.status}\r\n                onChange={(e) =>\r\n                  setSelectedCustomer({ ...selectedCustomer, status: e.target.value })\r\n                }\r\n              >\r\n                <option value=\"active\">Active</option>\r\n                <option value=\"inactive\">Inactive</option>\r\n              </select>\r\n            </label>\r\n            <label>\r\n              Vai trò:\r\n              <select\r\n                value={selectedCustomer.role}\r\n                onChange={(e) =>\r\n                  setSelectedCustomer({ ...selectedCustomer, role: e.target.value })\r\n                }\r\n              >\r\n                <option value=\"user\">User</option>\r\n                <option value=\"admin\">Admin</option>\r\n              </select>\r\n            </label>\r\n            <div className=\"modal-actions\">\r\n              <button onClick={updateCustomerInfo}>Lưu</button>\r\n              <button onClick={() => setIsModalOpen(false)}>Hủy</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 375, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FPOLY/ky5/ASM_Next/Pure-Botanica/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":";AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,MAAQ;;AAEzC,OAAO;IACL,IAAIF,QAAQC,GAAG,CAACK,uBAA2B,EAAF;;IAczC,OAAO;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;YAEP;QACF,OAAO;;QAMP;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FPOLY/ky5/ASM_Next/Pure-Botanica/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored[\n  'react-ssr'\n].ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CACxD,YACD,CAACC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 405, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FPOLY/ky5/ASM_Next/Pure-Botanica/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored['react-ssr'].React\n"],"names":["module","exports","require","vendored","React"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CAAC,YAAY,CAACC,KAAK","ignoreList":[0],"debugId":null}}]
}