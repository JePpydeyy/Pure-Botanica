{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FPOLY/ky5/ASM_Next/Pure-Botanica/src/app/admin/order/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\ninterface Order {\r\n  _id: string;\r\n  user: {\r\n    _id: string;\r\n    username: string;\r\n  };\r\n  createdAt: string;\r\n  address: string;\r\n  status: string;\r\n}\r\n\r\nexport default function OrdersPage() {\r\n  const [orders, setOrders] = useState<Order[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const fetchOrders = async () => {\r\n    try {\r\n      const res = await fetch('https://api-zeal.onrender.com/api/orders/all');\r\n      if (!res.ok) throw new Error('Không thể lấy danh sách đơn hàng');\r\n      const data = await res.json();\r\n      setOrders(data);\r\n    } catch (err: any) {\r\n      setError(err.message || 'Lỗi không xác định');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  const handleStatusChange = async (orderId: string, userId: string, status: string) => {\r\n    try {\r\n      const res = await fetch(\r\n        `https://api-zeal.onrender.com/api/orders/${orderId}?userId=${userId}`,\r\n        {\r\n          method: 'PUT',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ status }),\r\n        }\r\n      );\r\n      const result = await res.json();\r\n\r\n      if (!res.ok) {\r\n        throw new Error(result.error || 'Lỗi cập nhật trạng thái');\r\n      }\r\n\r\n      // Cập nhật UI\r\n      setOrders((prev) =>\r\n        prev.map((order) =>\r\n          order._id === orderId ? { ...order, status: result.order.status } : order\r\n        )\r\n      );\r\n      alert('✅ Cập nhật trạng thái thành công');\r\n    } catch (error: any) {\r\n      alert('❌ ' + error.message);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;\r\n  };\r\n\r\n  if (loading) return <p>Đang tải...</p>;\r\n  if (error) return <p className=\"text-red-500\">Lỗi: {error}</p>;\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-6xl mx-auto\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Quản lý đơn hàng</h1>\r\n      <table className=\"w-full border border-gray-300 rounded-md\">\r\n        <thead className=\"bg-gray-100\">\r\n          <tr>\r\n            <th className=\"p-2 border\">STT</th>\r\n            <th className=\"p-2 border\">Khách hàng</th>\r\n            <th className=\"p-2 border\">Địa chỉ</th>\r\n            <th className=\"p-2 border\">Ngày</th>\r\n            <th className=\"p-2 border\">Trạng thái</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {orders.map((order, idx) => (\r\n            <tr key={order._id} className=\"text-center border-t\">\r\n              <td className=\"p-2\">{idx + 1}</td>\r\n              <td className=\"p-2\">{order.user?.username || 'Ẩn danh'}</td>\r\n              <td className=\"p-2\">{order.address || 'Không có'}</td>\r\n              <td className=\"p-2\">{formatDate(order.createdAt)}</td>\r\n              <td className=\"p-2\">\r\n                <select\r\n                  value={order.status}\r\n                  onChange={(e) =>\r\n                    handleStatusChange(order._id, order.user._id, e.target.value)\r\n                  }\r\n                  className=\"border rounded p-1\"\r\n                >\r\n                  <option value=\"pending\">Pending</option>\r\n                  <option value=\"shipped\">Shipped</option>\r\n                  <option value=\"delivered\">Delivered</option>\r\n                  <option value=\"cancelled\">Cancelled</option>\r\n                </select>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FPOLY/ky5/ASM_Next/Pure-Botanica/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":";AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,MAAQ;;AAEzC,OAAO;IACL,IAAIF,QAAQC,GAAG,CAACK,uBAA2B,EAAF;;IAczC,OAAO;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;YAEP;QACF,OAAO;;QAMP;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 296, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FPOLY/ky5/ASM_Next/Pure-Botanica/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored[\n  'react-ssr'\n].ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CACxD,YACD,CAACC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FPOLY/ky5/ASM_Next/Pure-Botanica/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored['react-ssr'].React\n"],"names":["module","exports","require","vendored","React"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CAAC,YAAY,CAACC,KAAK","ignoreList":[0],"debugId":null}}]
}