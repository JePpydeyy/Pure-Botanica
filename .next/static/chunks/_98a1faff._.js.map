{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/user/detail/[id]/Detail.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"active\": \"Detail-module__si58nq__active\",\n  \"add-to-cart\": \"Detail-module__si58nq__add-to-cart\",\n  \"average-rating\": \"Detail-module__si58nq__average-rating\",\n  \"comment\": \"Detail-module__si58nq__comment\",\n  \"comment-error\": \"Detail-module__si58nq__comment-error\",\n  \"comment-input\": \"Detail-module__si58nq__comment-input\",\n  \"contact-button\": \"Detail-module__si58nq__contact-button\",\n  \"contact-section-title\": \"Detail-module__si58nq__contact-section-title\",\n  \"container\": \"Detail-module__si58nq__container\",\n  \"cr\": \"Detail-module__si58nq__cr\",\n  \"customer-review\": \"Detail-module__si58nq__customer-review\",\n  \"discount-percent\": \"Detail-module__si58nq__discount-percent\",\n  \"discount-price\": \"Detail-module__si58nq__discount-price\",\n  \"dot\": \"Detail-module__si58nq__dot\",\n  \"feature\": \"Detail-module__si58nq__feature\",\n  \"ingredients-title\": \"Detail-module__si58nq__ingredients-title\",\n  \"original-price\": \"Detail-module__si58nq__original-price\",\n  \"product-contact-section\": \"Detail-module__si58nq__product-contact-section\",\n  \"product-description\": \"Detail-module__si58nq__product-description\",\n  \"product-dots\": \"Detail-module__si58nq__product-dots\",\n  \"product-features\": \"Detail-module__si58nq__product-features\",\n  \"product-image-container\": \"Detail-module__si58nq__product-image-container\",\n  \"product-info\": \"Detail-module__si58nq__product-info\",\n  \"product-info-title\": \"Detail-module__si58nq__product-info-title\",\n  \"product-main-image\": \"Detail-module__si58nq__product-main-image\",\n  \"product-price\": \"Detail-module__si58nq__product-price\",\n  \"product-section\": \"Detail-module__si58nq__product-section\",\n  \"product-thumbnails\": \"Detail-module__si58nq__product-thumbnails\",\n  \"product-title\": \"Detail-module__si58nq__product-title\",\n  \"quantity-btn\": \"Detail-module__si58nq__quantity-btn\",\n  \"quantity-controls\": \"Detail-module__si58nq__quantity-controls\",\n  \"quantity-input\": \"Detail-module__si58nq__quantity-input\",\n  \"quantity-wrapper\": \"Detail-module__si58nq__quantity-wrapper\",\n  \"rating-summary\": \"Detail-module__si58nq__rating-summary\",\n  \"review\": \"Detail-module__si58nq__review\",\n  \"review-count\": \"Detail-module__si58nq__review-count\",\n  \"review-date\": \"Detail-module__si58nq__review-date\",\n  \"review-main-title\": \"Detail-module__si58nq__review-main-title\",\n  \"review-title\": \"Detail-module__si58nq__review-title\",\n  \"stars\": \"Detail-module__si58nq__stars\",\n  \"submit-comment\": \"Detail-module__si58nq__submit-comment\",\n  \"thumbnail\": \"Detail-module__si58nq__thumbnail\",\n  \"usage-item\": \"Detail-module__si58nq__usage-item\",\n  \"usage-list\": \"Detail-module__si58nq__usage-list\",\n  \"usage-title\": \"Detail-module__si58nq__usage-title\",\n  \"write-review\": \"Detail-module__si58nq__write-review\",\n  \"write-review-section\": \"Detail-module__si58nq__write-review-section\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
<<<<<<< HEAD
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file://D%3A/DATN/Pure-Botanica/src/app/user/detail/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport styles from \"./Detail.module.css\";\r\nimport { Product } from \"@/app/components/product_interface\";\r\nimport Image from \"next/image\"; \r\n\r\nconst formatPrice = (price: number): string => {\r\n  return price.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\") + \"đ\";\r\n};\r\n\r\nconst getImageUrl = (image: string): string => {\r\n  if (!image) return \"/images/placeholder.png\"; // Hình ảnh dự phòng\r\n  return `https://api-zeal.onrender.com/images/${image}`;\r\n};\r\n\r\ninterface Comment {\r\n  _id: string;\r\n  user: { username: string };\r\n  content: string;\r\n  createdAt: string;\r\n}\r\n\r\nexport default function DetailPage() {\r\n  const { id } = useParams();\r\n  const [product, setProduct] = useState<Product | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n  const [username, setUsername] = useState<string>(\"Người dùng\"); // Lưu username từ token\r\n  const [addingToCart, setAddingToCart] = useState(false);\r\n  const [cartMessage, setCartMessage] = useState<{ type: 'success' | 'error', text: string } | null>(null);\r\n  const [comments, setComments] = useState<Comment[]>([]); // Danh sách bình luận\r\n  const [newComment, setNewComment] = useState(\"\"); // Nội dung bình luận mới\r\n  const [commentError, setCommentError] = useState<string | null>(null); // Lỗi khi gửi bình luận\r\n  const [submittingComment, setSubmittingComment] = useState(false); // Trạng thái gửi bình luận\r\n\r\n  useEffect(() => {\r\n    // Lấy userId và username từ token JWT\r\n    const getUserInfoFromToken = () => {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (token) {\r\n        try {\r\n          const base64Url = token.split(\".\")[1];\r\n          const base64 = base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n          const jsonPayload = decodeURIComponent(\r\n            atob(base64)\r\n              .split(\"\")\r\n              .map((c) => \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2))\r\n              .join(\"\")\r\n          );\r\n          const decoded = JSON.parse(jsonPayload);\r\n          const userIdFromToken = decoded.id || decoded._id;\r\n          const usernameFromToken = decoded.username || \"Người dùng\";\r\n          if (userIdFromToken) {\r\n            setUserId(userIdFromToken);\r\n            setUsername(usernameFromToken);\r\n          }\r\n        } catch (err) {\r\n          console.error(\"Lỗi khi giải mã token:\", err);\r\n        }\r\n      }\r\n    };\r\n\r\n    getUserInfoFromToken();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      try {\r\n        const res = await fetch(`https://api-zeal.onrender.com/api/products/${id}`);\r\n        if (!res.ok) throw new Error(\"Không thể tải sản phẩm\");\r\n        const data = await res.json();\r\n        setProduct(data);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Lỗi khi tải chi tiết sản phẩm:\", error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    const fetchComments = async () => {\r\n      try {\r\n        const res = await fetch(`https://api-zeal.onrender.com/api/comments/product/${id}`);\r\n        if (!res.ok) throw new Error(\"Không thể tải bình luận\");\r\n        const data = await res.json();\r\n        console.log(\"Comments data:\", data); // Debug dữ liệu bình luận\r\n        setComments(Array.isArray(data) ? data : []);\r\n      } catch (error) {\r\n        console.error(\"Lỗi khi lấy bình luận:\", error);\r\n        setComments([]);\r\n      }\r\n    };\r\n\r\n    if (id) {\r\n      fetchProduct();\r\n      fetchComments();\r\n    }\r\n  }, [id]);\r\n\r\n  const increaseQty = () => setQuantity((prev) => prev + 1);\r\n  const decreaseQty = () => setQuantity((prev) => (prev > 1 ? prev - 1 : 1));\r\n\r\n  const addToCart = async () => {\r\n    if (!product) return;\r\n\r\n    if (!userId) {\r\n      setCartMessage({\r\n        type: 'error',\r\n        text: 'Vui lòng đăng nhập để thêm sản phẩm vào giỏ hàng'\r\n      });\r\n\r\n      const cartItems = JSON.parse(localStorage.getItem(\"cart\") || \"[]\");\r\n      const existingItemIndex = cartItems.findIndex((item: any) => item.id === product._id);\r\n\r\n      if (existingItemIndex !== -1) {\r\n        cartItems[existingItemIndex].quantity += quantity;\r\n      } else {\r\n        cartItems.push({\r\n          id: product._id,\r\n          name: product.name,\r\n          price: product.discountPrice || product.price,\r\n          image: product.images?.[0] || \"\",\r\n          quantity,\r\n        });\r\n      }\r\n\r\n      localStorage.setItem(\"cart\", JSON.stringify(cartItems));\r\n      alert(\"Đã thêm vào giỏ hàng (localStorage)!\");\r\n      return;\r\n    }\r\n\r\n    setAddingToCart(true);\r\n\r\n    try {\r\n      const productId = product._id;\r\n      if (!productId) throw new Error(\"ID sản phẩm không hợp lệ\");\r\n\r\n      const response = await fetch(\r\n        `https://api-zeal.onrender.com/api/carts/add`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            userId: userId,\r\n            productId: productId,\r\n            quantity: quantity\r\n          }),\r\n        }\r\n      );\r\n\r\n      const responseData = await response.json();\r\n      if (!response.ok) throw new Error(responseData.message || \"Không thể thêm sản phẩm vào giỏ hàng\");\r\n\r\n      setCartMessage({\r\n        type: 'success',\r\n        text: 'Đã thêm sản phẩm vào giỏ hàng!'\r\n      });\r\n\r\n      setTimeout(() => setCartMessage(null), 3000);\r\n    } catch (error: any) {\r\n      console.error(\"Lỗi khi thêm vào giỏ hàng:\", error);\r\n      setCartMessage({\r\n        type: 'error',\r\n        text: `Lỗi: ${error.message}`\r\n      });\r\n    } finally {\r\n      setAddingToCart(false);\r\n    }\r\n  };\r\n\r\n  const submitComment = async () => {\r\n    if (!userId) {\r\n      setCommentError(\"Vui lòng đăng nhập để viết bình luận.\");\r\n      return;\r\n    }\r\n\r\n    if (!newComment.trim()) {\r\n      setCommentError(\"Bình luận không được để trống.\");\r\n      return;\r\n    }\r\n\r\n    setSubmittingComment(true);\r\n    setCommentError(null);\r\n\r\n    try {\r\n      const response = await fetch(`https://api-zeal.onrender.com/api/comments`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          userId: userId,\r\n          productId: id,\r\n          content: newComment,\r\n        }),\r\n      });\r\n\r\n      const responseData = await response.json();\r\n      console.log(\"New comment response:\", responseData); // Debug dữ liệu trả về\r\n      if (!response.ok) throw new Error(responseData.message || \"Không thể gửi bình luận.\");\r\n\r\n      // Thêm bình luận mới với thông tin từ token\r\n      setComments((prev) => [\r\n        {\r\n          _id: responseData._id,\r\n          user: { username: username }, // Sử dụng username từ token\r\n          content: newComment,\r\n          createdAt: new Date().toISOString(),\r\n        },\r\n        ...prev,\r\n      ]);\r\n      setNewComment(\"\");\r\n\r\n      // Gọi lại API để đồng bộ danh sách bình luận\r\n      const res = await fetch(`https://api-zeal.onrender.com/api/comments/product/${id}`);\r\n      if (res.ok) {\r\n        const updatedComments = await res.json();\r\n        setComments(Array.isArray(updatedComments) ? updatedComments : []);\r\n      }\r\n    } catch (error: any) {\r\n      setCommentError(`Lỗi: ${error.message}`);\r\n    } finally {\r\n      setSubmittingComment(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <p className=\"text-center py-10\">Đang tải chi tiết sản phẩm...</p>;\r\n  if (!product) return <p className=\"text-center py-10\">Không tìm thấy sản phẩm.</p>;\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.container}>\r\n        <section className={styles[\"product-section\"]}>\r\n          <div className={styles[\"product-thumbnails\"]}>\r\n            {product.images?.map((image, index) => (\r\n              <div\r\n                key={`thumbnail-${index}`}\r\n                className={`${styles.thumbnail} ${index === currentImageIndex ? styles.active : \"\"}`}\r\n                onClick={() => setCurrentImageIndex(index)}\r\n              >\r\n                <img\r\n                  src={getImageUrl(image)}\r\n                  alt={`${product.name} thumbnail ${index + 1}`}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className={styles[\"product-image-container\"]}>\r\n            <div className={styles[\"product-main-image\"]}>\r\n              <img\r\n                src={getImageUrl(product.images?.[currentImageIndex] || \"\")}\r\n                alt={product.name}\r\n              />\r\n            </div>\r\n            <div className={styles[\"product-dots\"]}>\r\n              {product.images?.map((_, index) => (\r\n                <div\r\n                  key={`dot-${index}`}\r\n                  className={`${styles.dot} ${index === currentImageIndex ? styles.active : \"\"}`}\r\n                  onClick={() => setCurrentImageIndex(index)}\r\n                ></div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className={styles[\"product-info\"]}>\r\n            <h1 className={styles[\"product-title\"]}>{product.name}</h1>\r\n            <p className={styles[\"product-price\"]}>\r\n              {product.discountPrice ? (\r\n                <>\r\n                  <span className={styles[\"discount-price\"]}>{formatPrice(product.discountPrice)}</span>\r\n                  <span className={styles[\"original-price\"]}>{formatPrice(product.price)}</span>\r\n                  <span className={styles[\"discount-percent\"]}>\r\n                    {`-${Math.round(\r\n                      ((product.price - product.discountPrice) / product.price) * 100\r\n                    )}%`}\r\n                  </span>\r\n                </>\r\n              ) : (\r\n                <>{formatPrice(product.price)}</>\r\n              )}\r\n            </p>\r\n            <p className={styles[\"product-description\"]}>\r\n              {product.description || \"Chưa có mô tả cho sản phẩm này.\"}\r\n            </p>\r\n\r\n            <div className={styles[\"product-features\"]}>\r\n              {product.special?.map((feature, index) => (\r\n                <div key={`feature-${index}`} className={styles.feature}>\r\n                  {feature}\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className={styles[\"quantity-controls\"]}>\r\n              <div className={styles[\"quantity-wrapper\"]}>\r\n                <button className={`${styles[\"quantity-btn\"]} ${styles.decrease}`} onClick={decreaseQty}>\r\n                  −\r\n                </button>\r\n                <input\r\n                  type=\"text\"\r\n                  className={styles[\"quantity-input\"]}\r\n                  value={quantity}\r\n                  readOnly\r\n                />\r\n                <button className={`${styles[\"quantity-btn\"]} ${styles.increase}`} onClick={increaseQty}>\r\n                  +\r\n                </button>\r\n              </div>\r\n              <button \r\n                className={styles[\"add-to-cart\"]} \r\n                onClick={addToCart}\r\n                disabled={addingToCart}\r\n              >\r\n                {addingToCart ? 'Đang thêm...' : 'Thêm vào giỏ hàng'}\r\n              </button>\r\n            </div>\r\n\r\n            {cartMessage && (\r\n              <div className={`${styles[\"cart-message\"]} ${styles[cartMessage.type]}`}>\r\n                {cartMessage.text}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </section>\r\n\r\n        <div className={styles[\"product-info\"]}>\r\n          <h2 className={styles[\"product-info-title\"]}>Thông tin sản phẩm:</h2>\r\n          <h3 className={styles[\"ingredients-title\"]}>Thành phần:</h3>\r\n          <p>{product.ingredients?.join(\", \") || \"Không có thông tin thành phần.\"}</p>\r\n\r\n          <h3 className={styles[\"usage-title\"]}>Hướng dẫn sử dụng:</h3>\r\n          <ul className={styles[\"usage-list\"]}>\r\n            {product.usage_instructions?.map((instruction, index) => (\r\n              <li key={`instruction-${index}`} className={styles[\"usage-item\"]}>\r\n                {instruction}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles.cr}>\r\n        <div className={styles[\"customer-review\"]}>\r\n          <h1 className={styles[\"review-main-title\"]}>Đánh giá từ khách hàng</h1>\r\n\r\n          <div className={styles[\"write-review-section\"]}>\r\n            <h2 className={styles[\"review-title\"]}>Viết bình luận của bạn</h2>\r\n            <textarea\r\n              className={styles[\"comment-input\"]}\r\n              value={newComment}\r\n              onChange={(e) => setNewComment(e.target.value)}\r\n              placeholder=\"Nhập bình luận của bạn...\"\r\n              rows={4}\r\n            />\r\n            {commentError && (\r\n              <p className={styles[\"comment-error\"]}>{commentError}</p>\r\n            )}\r\n            <button\r\n              className={styles[\"submit-comment\"]}\r\n              onClick={submitComment}\r\n              disabled={submittingComment}\r\n            >\r\n              {submittingComment ? \"Đang gửi...\" : \"Gửi bình luận\"}\r\n            </button>\r\n          </div>\r\n\r\n          {comments.length > 0 ? (\r\n            comments.map((comment, index) => (\r\n              <div key={comment._id || `comment-${index}`} className={styles.review}>\r\n                <h2 className={styles[\"review-title\"]}>{comment.user?.username || \"Ẩn danh\"}</h2>\r\n                <span className={styles[\"review-date\"]}>\r\n                  Ngày: {new Date(comment.createdAt).toLocaleDateString(\"vi-VN\")}\r\n                </span>\r\n                <p className={styles.comment}>{comment.content}</p>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <p>Chưa có bình luận nào cho sản phẩm này.</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <section className={styles[\"product-contact-section\"]}>\r\n        <h2 className={styles[\"contact-section-title\"]}>\r\n          Không tìm thấy được dòng sản phẩm mà bạn cần<br />hoặc thích hợp với da của bạn?\r\n        </h2>\r\n        <button className={styles[\"contact-button\"]}>Liên hệ với chúng tôi</button>\r\n      </section>\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 730, "column": 0}, "map": {"version":3,"sources":["file://D%3A/DATN/Pure-Botanica/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
=======
<<<<<<< HEAD
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FPOLY/ky6/Pure-Botanica/src/app/user/detail/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport styles from \"./Detail.module.css\";\r\nimport { Product } from \"@/app/components/product_interface\";\r\nimport Image from \"next/image\"; \r\n\r\nconst formatPrice = (price: number): string => {\r\n  return price.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\") + \"đ\";\r\n};\r\n\r\nconst getImageUrl = (image: string): string => {\r\n  if (!image) return \"/images/placeholder.png\"; // Hình ảnh dự phòng\r\n  return `https://api-zeal.onrender.com/images/${image}`;\r\n};\r\n\r\ninterface Comment {\r\n  _id: string;\r\n  user: { username: string };\r\n  content: string;\r\n  createdAt: string;\r\n}\r\n\r\nexport default function DetailPage() {\r\n  const { id } = useParams();\r\n  const [product, setProduct] = useState<Product | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n  const [username, setUsername] = useState<string>(\"Người dùng\"); // Lưu username từ token\r\n  const [addingToCart, setAddingToCart] = useState(false);\r\n  const [cartMessage, setCartMessage] = useState<{ type: 'success' | 'error', text: string } | null>(null);\r\n  const [comments, setComments] = useState<Comment[]>([]); // Danh sách bình luận\r\n  const [newComment, setNewComment] = useState(\"\"); // Nội dung bình luận mới\r\n  const [commentError, setCommentError] = useState<string | null>(null); // Lỗi khi gửi bình luận\r\n  const [submittingComment, setSubmittingComment] = useState(false); // Trạng thái gửi bình luận\r\n\r\n  useEffect(() => {\r\n    // Lấy userId và username từ token JWT\r\n    const getUserInfoFromToken = () => {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (token) {\r\n        try {\r\n          const base64Url = token.split(\".\")[1];\r\n          const base64 = base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n          const jsonPayload = decodeURIComponent(\r\n            atob(base64)\r\n              .split(\"\")\r\n              .map((c) => \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2))\r\n              .join(\"\")\r\n          );\r\n          const decoded = JSON.parse(jsonPayload);\r\n          const userIdFromToken = decoded.id || decoded._id;\r\n          const usernameFromToken = decoded.username || \"Người dùng\";\r\n          if (userIdFromToken) {\r\n            setUserId(userIdFromToken);\r\n            setUsername(usernameFromToken);\r\n          }\r\n        } catch (err) {\r\n          console.error(\"Lỗi khi giải mã token:\", err);\r\n        }\r\n      }\r\n    };\r\n\r\n    getUserInfoFromToken();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      try {\r\n        const res = await fetch(`https://api-zeal.onrender.com/api/products/${id}`);\r\n        if (!res.ok) throw new Error(\"Không thể tải sản phẩm\");\r\n        const data = await res.json();\r\n        setProduct(data);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Lỗi khi tải chi tiết sản phẩm:\", error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    const fetchComments = async () => {\r\n      try {\r\n        const res = await fetch(`https://api-zeal.onrender.com/api/comments/product/${id}`);\r\n        if (!res.ok) throw new Error(\"Không thể tải bình luận\");\r\n        const data = await res.json();\r\n        console.log(\"Comments data:\", data); // Debug dữ liệu bình luận\r\n        setComments(Array.isArray(data) ? data : []);\r\n      } catch (error) {\r\n        console.error(\"Lỗi khi lấy bình luận:\", error);\r\n        setComments([]);\r\n      }\r\n    };\r\n\r\n    if (id) {\r\n      fetchProduct();\r\n      fetchComments();\r\n    }\r\n  }, [id]);\r\n\r\n  const increaseQty = () => setQuantity((prev) => prev + 1);\r\n  const decreaseQty = () => setQuantity((prev) => (prev > 1 ? prev - 1 : 1));\r\n\r\n  const addToCart = async () => {\r\n    if (!product) return;\r\n\r\n    if (!userId) {\r\n      setCartMessage({\r\n        type: 'error',\r\n        text: 'Vui lòng đăng nhập để thêm sản phẩm vào giỏ hàng'\r\n      });\r\n\r\n      const cartItems = JSON.parse(localStorage.getItem(\"cart\") || \"[]\");\r\n      const existingItemIndex = cartItems.findIndex((item: any) => item.id === product._id);\r\n\r\n      if (existingItemIndex !== -1) {\r\n        cartItems[existingItemIndex].quantity += quantity;\r\n      } else {\r\n        cartItems.push({\r\n          id: product._id,\r\n          name: product.name,\r\n          price: product.discountPrice || product.price,\r\n          image: product.images?.[0] || \"\",\r\n          quantity,\r\n        });\r\n      }\r\n\r\n      localStorage.setItem(\"cart\", JSON.stringify(cartItems));\r\n      alert(\"Đã thêm vào giỏ hàng (localStorage)!\");\r\n      return;\r\n    }\r\n\r\n    setAddingToCart(true);\r\n\r\n    try {\r\n      const productId = product._id;\r\n      if (!productId) throw new Error(\"ID sản phẩm không hợp lệ\");\r\n\r\n      const response = await fetch(\r\n        `https://api-zeal.onrender.com/api/carts/add`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            userId: userId,\r\n            productId: productId,\r\n            quantity: quantity\r\n          }),\r\n        }\r\n      );\r\n\r\n      const responseData = await response.json();\r\n      if (!response.ok) throw new Error(responseData.message || \"Không thể thêm sản phẩm vào giỏ hàng\");\r\n\r\n      setCartMessage({\r\n        type: 'success',\r\n        text: 'Đã thêm sản phẩm vào giỏ hàng!'\r\n      });\r\n\r\n      setTimeout(() => setCartMessage(null), 3000);\r\n    } catch (error: any) {\r\n      console.error(\"Lỗi khi thêm vào giỏ hàng:\", error);\r\n      setCartMessage({\r\n        type: 'error',\r\n        text: `Lỗi: ${error.message}`\r\n      });\r\n    } finally {\r\n      setAddingToCart(false);\r\n    }\r\n  };\r\n\r\n  const submitComment = async () => {\r\n    if (!userId) {\r\n      setCommentError(\"Vui lòng đăng nhập để viết bình luận.\");\r\n      return;\r\n    }\r\n\r\n    if (!newComment.trim()) {\r\n      setCommentError(\"Bình luận không được để trống.\");\r\n      return;\r\n    }\r\n\r\n    setSubmittingComment(true);\r\n    setCommentError(null);\r\n\r\n    try {\r\n      const response = await fetch(`https://api-zeal.onrender.com/api/comments`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          userId: userId,\r\n          productId: id,\r\n          content: newComment,\r\n        }),\r\n      });\r\n\r\n      const responseData = await response.json();\r\n      console.log(\"New comment response:\", responseData); // Debug dữ liệu trả về\r\n      if (!response.ok) throw new Error(responseData.message || \"Không thể gửi bình luận.\");\r\n\r\n      // Thêm bình luận mới với thông tin từ token\r\n      setComments((prev) => [\r\n        {\r\n          _id: responseData._id,\r\n          user: { username: username }, // Sử dụng username từ token\r\n          content: newComment,\r\n          createdAt: new Date().toISOString(),\r\n        },\r\n        ...prev,\r\n      ]);\r\n      setNewComment(\"\");\r\n\r\n      // Gọi lại API để đồng bộ danh sách bình luận\r\n      const res = await fetch(`https://api-zeal.onrender.com/api/comments/product/${id}`);\r\n      if (res.ok) {\r\n        const updatedComments = await res.json();\r\n        setComments(Array.isArray(updatedComments) ? updatedComments : []);\r\n      }\r\n    } catch (error: any) {\r\n      setCommentError(`Lỗi: ${error.message}`);\r\n    } finally {\r\n      setSubmittingComment(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <p className=\"text-center py-10\">Đang tải chi tiết sản phẩm...</p>;\r\n  if (!product) return <p className=\"text-center py-10\">Không tìm thấy sản phẩm.</p>;\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.container}>\r\n        <section className={styles[\"product-section\"]}>\r\n          <div className={styles[\"product-thumbnails\"]}>\r\n            {product.images?.map((image, index) => (\r\n              <div\r\n                key={`thumbnail-${index}`}\r\n                className={`${styles.thumbnail} ${index === currentImageIndex ? styles.active : \"\"}`}\r\n                onClick={() => setCurrentImageIndex(index)}\r\n              >\r\n                <img\r\n                  src={getImageUrl(image)}\r\n                  alt={`${product.name} thumbnail ${index + 1}`}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className={styles[\"product-image-container\"]}>\r\n            <div className={styles[\"product-main-image\"]}>\r\n              <img\r\n                src={getImageUrl(product.images?.[currentImageIndex] || \"\")}\r\n                alt={product.name}\r\n              />\r\n            </div>\r\n            <div className={styles[\"product-dots\"]}>\r\n              {product.images?.map((_, index) => (\r\n                <div\r\n                  key={`dot-${index}`}\r\n                  className={`${styles.dot} ${index === currentImageIndex ? styles.active : \"\"}`}\r\n                  onClick={() => setCurrentImageIndex(index)}\r\n                ></div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className={styles[\"product-info\"]}>\r\n            <h1 className={styles[\"product-title\"]}>{product.name}</h1>\r\n            <p className={styles[\"product-price\"]}>\r\n              {product.discountPrice ? (\r\n                <>\r\n                  <span className={styles[\"discount-price\"]}>{formatPrice(product.discountPrice)}</span>\r\n                  <span className={styles[\"original-price\"]}>{formatPrice(product.price)}</span>\r\n                  <span className={styles[\"discount-percent\"]}>\r\n                    {`-${Math.round(\r\n                      ((product.price - product.discountPrice) / product.price) * 100\r\n                    )}%`}\r\n                  </span>\r\n                </>\r\n              ) : (\r\n                <>{formatPrice(product.price)}</>\r\n              )}\r\n            </p>\r\n            <p className={styles[\"product-description\"]}>\r\n              {product.description || \"Chưa có mô tả cho sản phẩm này.\"}\r\n            </p>\r\n\r\n            <div className={styles[\"product-features\"]}>\r\n              {product.special?.map((feature, index) => (\r\n                <div key={`feature-${index}`} className={styles.feature}>\r\n                  {feature}\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className={styles[\"quantity-controls\"]}>\r\n              <div className={styles[\"quantity-wrapper\"]}>\r\n                <button className={`${styles[\"quantity-btn\"]} ${styles.decrease}`} onClick={decreaseQty}>\r\n                  −\r\n                </button>\r\n                <input\r\n                  type=\"text\"\r\n                  className={styles[\"quantity-input\"]}\r\n                  value={quantity}\r\n                  readOnly\r\n                />\r\n                <button className={`${styles[\"quantity-btn\"]} ${styles.increase}`} onClick={increaseQty}>\r\n                  +\r\n                </button>\r\n              </div>\r\n              <button \r\n                className={styles[\"add-to-cart\"]} \r\n                onClick={addToCart}\r\n                disabled={addingToCart}\r\n              >\r\n                {addingToCart ? 'Đang thêm...' : 'Thêm vào giỏ hàng'}\r\n              </button>\r\n            </div>\r\n\r\n            {cartMessage && (\r\n              <div className={`${styles[\"cart-message\"]} ${styles[cartMessage.type]}`}>\r\n                {cartMessage.text}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </section>\r\n\r\n        <div className={styles[\"product-info\"]}>\r\n          <h2 className={styles[\"product-info-title\"]}>Thông tin sản phẩm:</h2>\r\n          <h3 className={styles[\"ingredients-title\"]}>Thành phần:</h3>\r\n          <p>{product.ingredients?.join(\", \") || \"Không có thông tin thành phần.\"}</p>\r\n\r\n          <h3 className={styles[\"usage-title\"]}>Hướng dẫn sử dụng:</h3>\r\n          <ul className={styles[\"usage-list\"]}>\r\n            {product.usage_instructions?.map((instruction, index) => (\r\n              <li key={`instruction-${index}`} className={styles[\"usage-item\"]}>\r\n                {instruction}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles.cr}>\r\n        <div className={styles[\"customer-review\"]}>\r\n          <h1 className={styles[\"review-main-title\"]}>Đánh giá từ khách hàng</h1>\r\n\r\n          <div className={styles[\"write-review-section\"]}>\r\n            <h2 className={styles[\"review-title\"]}>Viết bình luận của bạn</h2>\r\n            <textarea\r\n              className={styles[\"comment-input\"]}\r\n              value={newComment}\r\n              onChange={(e) => setNewComment(e.target.value)}\r\n              placeholder=\"Nhập bình luận của bạn...\"\r\n              rows={4}\r\n            />\r\n            {commentError && (\r\n              <p className={styles[\"comment-error\"]}>{commentError}</p>\r\n            )}\r\n            <button\r\n              className={styles[\"submit-comment\"]}\r\n              onClick={submitComment}\r\n              disabled={submittingComment}\r\n            >\r\n              {submittingComment ? \"Đang gửi...\" : \"Gửi bình luận\"}\r\n            </button>\r\n          </div>\r\n\r\n          {comments.length > 0 ? (\r\n            comments.map((comment, index) => (\r\n              <div key={comment._id || `comment-${index}`} className={styles.review}>\r\n                <h2 className={styles[\"review-title\"]}>{comment.user?.username || \"Ẩn danh\"}</h2>\r\n                <span className={styles[\"review-date\"]}>\r\n                  Ngày: {new Date(comment.createdAt).toLocaleDateString(\"vi-VN\")}\r\n                </span>\r\n                <p className={styles.comment}>{comment.content}</p>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <p>Chưa có bình luận nào cho sản phẩm này.</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <section className={styles[\"product-contact-section\"]}>\r\n        <h2 className={styles[\"contact-section-title\"]}>\r\n          Không tìm thấy được dòng sản phẩm mà bạn cần<br />hoặc thích hợp với da của bạn?\r\n        </h2>\r\n        <button className={styles[\"contact-button\"]}>Liên hệ với chúng tôi</button>\r\n      </section>\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 730, "column": 0}, "map": {"version":3,"sources":["file://D%3A/FPOLY/ky6/Pure-Botanica/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
=======
<<<<<<< HEAD
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file://D%3A/DATN/Pure-Botanica/src/app/user/detail/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport styles from \"./Detail.module.css\";\r\nimport { Product } from \"@/app/components/product_interface\";\r\nimport Image from \"next/image\"; \r\n\r\nconst formatPrice = (price: number): string => {\r\n  return price.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\") + \"đ\";\r\n};\r\n\r\nconst getImageUrl = (image: string): string => {\r\n  if (!image) return \"/images/placeholder.png\"; // Hình ảnh dự phòng\r\n  return `https://api-zeal.onrender.com/images/${image}`;\r\n};\r\n\r\ninterface Comment {\r\n  _id: string;\r\n  user: { username: string };\r\n  content: string;\r\n  createdAt: string;\r\n}\r\n\r\nexport default function DetailPage() {\r\n  const { id } = useParams();\r\n  const [product, setProduct] = useState<Product | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n  const [username, setUsername] = useState<string>(\"Người dùng\"); // Lưu username từ token\r\n  const [addingToCart, setAddingToCart] = useState(false);\r\n  const [cartMessage, setCartMessage] = useState<{ type: 'success' | 'error', text: string } | null>(null);\r\n  const [comments, setComments] = useState<Comment[]>([]); // Danh sách bình luận\r\n  const [newComment, setNewComment] = useState(\"\"); // Nội dung bình luận mới\r\n  const [commentError, setCommentError] = useState<string | null>(null); // Lỗi khi gửi bình luận\r\n  const [submittingComment, setSubmittingComment] = useState(false); // Trạng thái gửi bình luận\r\n\r\n  useEffect(() => {\r\n    // Lấy userId và username từ token JWT\r\n    const getUserInfoFromToken = () => {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (token) {\r\n        try {\r\n          const base64Url = token.split(\".\")[1];\r\n          const base64 = base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n          const jsonPayload = decodeURIComponent(\r\n            atob(base64)\r\n              .split(\"\")\r\n              .map((c) => \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2))\r\n              .join(\"\")\r\n          );\r\n          const decoded = JSON.parse(jsonPayload);\r\n          const userIdFromToken = decoded.id || decoded._id;\r\n          const usernameFromToken = decoded.username || \"Người dùng\";\r\n          if (userIdFromToken) {\r\n            setUserId(userIdFromToken);\r\n            setUsername(usernameFromToken);\r\n          }\r\n        } catch (err) {\r\n          console.error(\"Lỗi khi giải mã token:\", err);\r\n        }\r\n      }\r\n    };\r\n\r\n    getUserInfoFromToken();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      try {\r\n        const res = await fetch(`https://api-zeal.onrender.com/api/products/${id}`);\r\n        if (!res.ok) throw new Error(\"Không thể tải sản phẩm\");\r\n        const data = await res.json();\r\n        setProduct(data);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Lỗi khi tải chi tiết sản phẩm:\", error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    const fetchComments = async () => {\r\n      try {\r\n        const res = await fetch(`https://api-zeal.onrender.com/api/comments/product/${id}`);\r\n        if (!res.ok) throw new Error(\"Không thể tải bình luận\");\r\n        const data = await res.json();\r\n        console.log(\"Comments data:\", data); // Debug dữ liệu bình luận\r\n        setComments(Array.isArray(data) ? data : []);\r\n      } catch (error) {\r\n        console.error(\"Lỗi khi lấy bình luận:\", error);\r\n        setComments([]);\r\n      }\r\n    };\r\n\r\n    if (id) {\r\n      fetchProduct();\r\n      fetchComments();\r\n    }\r\n  }, [id]);\r\n\r\n  const increaseQty = () => setQuantity((prev) => prev + 1);\r\n  const decreaseQty = () => setQuantity((prev) => (prev > 1 ? prev - 1 : 1));\r\n\r\n  const addToCart = async () => {\r\n    if (!product) return;\r\n\r\n    if (!userId) {\r\n      setCartMessage({\r\n        type: 'error',\r\n        text: 'Vui lòng đăng nhập để thêm sản phẩm vào giỏ hàng'\r\n      });\r\n\r\n      const cartItems = JSON.parse(localStorage.getItem(\"cart\") || \"[]\");\r\n      const existingItemIndex = cartItems.findIndex((item: any) => item.id === product._id);\r\n\r\n      if (existingItemIndex !== -1) {\r\n        cartItems[existingItemIndex].quantity += quantity;\r\n      } else {\r\n        cartItems.push({\r\n          id: product._id,\r\n          name: product.name,\r\n          price: product.discountPrice || product.price,\r\n          image: product.images?.[0] || \"\",\r\n          quantity,\r\n        });\r\n      }\r\n\r\n      localStorage.setItem(\"cart\", JSON.stringify(cartItems));\r\n      alert(\"Đã thêm vào giỏ hàng (localStorage)!\");\r\n      return;\r\n    }\r\n\r\n    setAddingToCart(true);\r\n\r\n    try {\r\n      const productId = product._id;\r\n      if (!productId) throw new Error(\"ID sản phẩm không hợp lệ\");\r\n\r\n      const response = await fetch(\r\n        `https://api-zeal.onrender.com/api/carts/add`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            userId: userId,\r\n            productId: productId,\r\n            quantity: quantity\r\n          }),\r\n        }\r\n      );\r\n\r\n      const responseData = await response.json();\r\n      if (!response.ok) throw new Error(responseData.message || \"Không thể thêm sản phẩm vào giỏ hàng\");\r\n\r\n      setCartMessage({\r\n        type: 'success',\r\n        text: 'Đã thêm sản phẩm vào giỏ hàng!'\r\n      });\r\n\r\n      setTimeout(() => setCartMessage(null), 3000);\r\n    } catch (error: any) {\r\n      console.error(\"Lỗi khi thêm vào giỏ hàng:\", error);\r\n      setCartMessage({\r\n        type: 'error',\r\n        text: `Lỗi: ${error.message}`\r\n      });\r\n    } finally {\r\n      setAddingToCart(false);\r\n    }\r\n  };\r\n\r\n  const submitComment = async () => {\r\n    if (!userId) {\r\n      setCommentError(\"Vui lòng đăng nhập để viết bình luận.\");\r\n      return;\r\n    }\r\n\r\n    if (!newComment.trim()) {\r\n      setCommentError(\"Bình luận không được để trống.\");\r\n      return;\r\n    }\r\n\r\n    setSubmittingComment(true);\r\n    setCommentError(null);\r\n\r\n    try {\r\n      const response = await fetch(`https://api-zeal.onrender.com/api/comments`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          userId: userId,\r\n          productId: id,\r\n          content: newComment,\r\n        }),\r\n      });\r\n\r\n      const responseData = await response.json();\r\n      console.log(\"New comment response:\", responseData); // Debug dữ liệu trả về\r\n      if (!response.ok) throw new Error(responseData.message || \"Không thể gửi bình luận.\");\r\n\r\n      // Thêm bình luận mới với thông tin từ token\r\n      setComments((prev) => [\r\n        {\r\n          _id: responseData._id,\r\n          user: { username: username }, // Sử dụng username từ token\r\n          content: newComment,\r\n          createdAt: new Date().toISOString(),\r\n        },\r\n        ...prev,\r\n      ]);\r\n      setNewComment(\"\");\r\n\r\n      // Gọi lại API để đồng bộ danh sách bình luận\r\n      const res = await fetch(`https://api-zeal.onrender.com/api/comments/product/${id}`);\r\n      if (res.ok) {\r\n        const updatedComments = await res.json();\r\n        setComments(Array.isArray(updatedComments) ? updatedComments : []);\r\n      }\r\n    } catch (error: any) {\r\n      setCommentError(`Lỗi: ${error.message}`);\r\n    } finally {\r\n      setSubmittingComment(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <p className=\"text-center py-10\">Đang tải chi tiết sản phẩm...</p>;\r\n  if (!product) return <p className=\"text-center py-10\">Không tìm thấy sản phẩm.</p>;\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.container}>\r\n        <section className={styles[\"product-section\"]}>\r\n          <div className={styles[\"product-thumbnails\"]}>\r\n            {product.images?.map((image, index) => (\r\n              <div\r\n                key={`thumbnail-${index}`}\r\n                className={`${styles.thumbnail} ${index === currentImageIndex ? styles.active : \"\"}`}\r\n                onClick={() => setCurrentImageIndex(index)}\r\n              >\r\n                <img\r\n                  src={getImageUrl(image)}\r\n                  alt={`${product.name} thumbnail ${index + 1}`}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className={styles[\"product-image-container\"]}>\r\n            <div className={styles[\"product-main-image\"]}>\r\n              <img\r\n                src={getImageUrl(product.images?.[currentImageIndex] || \"\")}\r\n                alt={product.name}\r\n              />\r\n            </div>\r\n            <div className={styles[\"product-dots\"]}>\r\n              {product.images?.map((_, index) => (\r\n                <div\r\n                  key={`dot-${index}`}\r\n                  className={`${styles.dot} ${index === currentImageIndex ? styles.active : \"\"}`}\r\n                  onClick={() => setCurrentImageIndex(index)}\r\n                ></div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className={styles[\"product-info\"]}>\r\n            <h1 className={styles[\"product-title\"]}>{product.name}</h1>\r\n            <p className={styles[\"product-price\"]}>\r\n              {product.discountPrice ? (\r\n                <>\r\n                  <span className={styles[\"discount-price\"]}>{formatPrice(product.discountPrice)}</span>\r\n                  <span className={styles[\"original-price\"]}>{formatPrice(product.price)}</span>\r\n                  <span className={styles[\"discount-percent\"]}>\r\n                    {`-${Math.round(\r\n                      ((product.price - product.discountPrice) / product.price) * 100\r\n                    )}%`}\r\n                  </span>\r\n                </>\r\n              ) : (\r\n                <>{formatPrice(product.price)}</>\r\n              )}\r\n            </p>\r\n            <p className={styles[\"product-description\"]}>\r\n              {product.description || \"Chưa có mô tả cho sản phẩm này.\"}\r\n            </p>\r\n\r\n            <div className={styles[\"product-features\"]}>\r\n              {product.special?.map((feature, index) => (\r\n                <div key={`feature-${index}`} className={styles.feature}>\r\n                  {feature}\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className={styles[\"quantity-controls\"]}>\r\n              <div className={styles[\"quantity-wrapper\"]}>\r\n                <button className={`${styles[\"quantity-btn\"]} ${styles.decrease}`} onClick={decreaseQty}>\r\n                  −\r\n                </button>\r\n                <input\r\n                  type=\"text\"\r\n                  className={styles[\"quantity-input\"]}\r\n                  value={quantity}\r\n                  readOnly\r\n                />\r\n                <button className={`${styles[\"quantity-btn\"]} ${styles.increase}`} onClick={increaseQty}>\r\n                  +\r\n                </button>\r\n              </div>\r\n              <button \r\n                className={styles[\"add-to-cart\"]} \r\n                onClick={addToCart}\r\n                disabled={addingToCart}\r\n              >\r\n                {addingToCart ? 'Đang thêm...' : 'Thêm vào giỏ hàng'}\r\n              </button>\r\n            </div>\r\n\r\n            {cartMessage && (\r\n              <div className={`${styles[\"cart-message\"]} ${styles[cartMessage.type]}`}>\r\n                {cartMessage.text}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </section>\r\n\r\n        <div className={styles[\"product-info\"]}>\r\n          <h2 className={styles[\"product-info-title\"]}>Thông tin sản phẩm:</h2>\r\n          <h3 className={styles[\"ingredients-title\"]}>Thành phần:</h3>\r\n          <p>{product.ingredients?.join(\", \") || \"Không có thông tin thành phần.\"}</p>\r\n\r\n          <h3 className={styles[\"usage-title\"]}>Hướng dẫn sử dụng:</h3>\r\n          <ul className={styles[\"usage-list\"]}>\r\n            {product.usage_instructions?.map((instruction, index) => (\r\n              <li key={`instruction-${index}`} className={styles[\"usage-item\"]}>\r\n                {instruction}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles.cr}>\r\n        <div className={styles[\"customer-review\"]}>\r\n          <h1 className={styles[\"review-main-title\"]}>Đánh giá từ khách hàng</h1>\r\n\r\n          <div className={styles[\"write-review-section\"]}>\r\n            <h2 className={styles[\"review-title\"]}>Viết bình luận của bạn</h2>\r\n            <textarea\r\n              className={styles[\"comment-input\"]}\r\n              value={newComment}\r\n              onChange={(e) => setNewComment(e.target.value)}\r\n              placeholder=\"Nhập bình luận của bạn...\"\r\n              rows={4}\r\n            />\r\n            {commentError && (\r\n              <p className={styles[\"comment-error\"]}>{commentError}</p>\r\n            )}\r\n            <button\r\n              className={styles[\"submit-comment\"]}\r\n              onClick={submitComment}\r\n              disabled={submittingComment}\r\n            >\r\n              {submittingComment ? \"Đang gửi...\" : \"Gửi bình luận\"}\r\n            </button>\r\n          </div>\r\n\r\n          {comments.length > 0 ? (\r\n            comments.map((comment, index) => (\r\n              <div key={comment._id || `comment-${index}`} className={styles.review}>\r\n                <h2 className={styles[\"review-title\"]}>{comment.user?.username || \"Ẩn danh\"}</h2>\r\n                <span className={styles[\"review-date\"]}>\r\n                  Ngày: {new Date(comment.createdAt).toLocaleDateString(\"vi-VN\")}\r\n                </span>\r\n                <p className={styles.comment}>{comment.content}</p>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <p>Chưa có bình luận nào cho sản phẩm này.</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <section className={styles[\"product-contact-section\"]}>\r\n        <h2 className={styles[\"contact-section-title\"]}>\r\n          Không tìm thấy được dòng sản phẩm mà bạn cần<br />hoặc thích hợp với da của bạn?\r\n        </h2>\r\n        <button className={styles[\"contact-button\"]}>Liên hệ với chúng tôi</button>\r\n      </section>\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 730, "column": 0}, "map": {"version":3,"sources":["file://D%3A/DATN/Pure-Botanica/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
=======
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file://F%3A/REACT/DU%20AN%20TN/Pure-Botanica/src/app/user/detail/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport styles from \"./Detail.module.css\";\r\nimport { Product } from \"@/app/components/product_interface\";\r\nimport Image from \"next/image\"; \r\n\r\nconst formatPrice = (price: number): string => {\r\n  return price.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\") + \"đ\";\r\n};\r\n\r\nconst getImageUrl = (image: string): string => {\r\n  if (!image) return \"/images/placeholder.png\"; // Hình ảnh dự phòng\r\n  return `https://api-zeal.onrender.com/images/${image}`;\r\n};\r\n\r\ninterface Comment {\r\n  _id: string;\r\n  user: { username: string };\r\n  content: string;\r\n  createdAt: string;\r\n}\r\n\r\nexport default function DetailPage() {\r\n  const { id } = useParams();\r\n  const [product, setProduct] = useState<Product | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n  const [username, setUsername] = useState<string>(\"Người dùng\"); // Lưu username từ token\r\n  const [addingToCart, setAddingToCart] = useState(false);\r\n  const [cartMessage, setCartMessage] = useState<{ type: 'success' | 'error', text: string } | null>(null);\r\n  const [comments, setComments] = useState<Comment[]>([]); // Danh sách bình luận\r\n  const [newComment, setNewComment] = useState(\"\"); // Nội dung bình luận mới\r\n  const [commentError, setCommentError] = useState<string | null>(null); // Lỗi khi gửi bình luận\r\n  const [submittingComment, setSubmittingComment] = useState(false); // Trạng thái gửi bình luận\r\n\r\n  useEffect(() => {\r\n    // Lấy userId và username từ token JWT\r\n    const getUserInfoFromToken = () => {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (token) {\r\n        try {\r\n          const base64Url = token.split(\".\")[1];\r\n          const base64 = base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n          const jsonPayload = decodeURIComponent(\r\n            atob(base64)\r\n              .split(\"\")\r\n              .map((c) => \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2))\r\n              .join(\"\")\r\n          );\r\n          const decoded = JSON.parse(jsonPayload);\r\n          const userIdFromToken = decoded.id || decoded._id;\r\n          const usernameFromToken = decoded.username || \"Người dùng\";\r\n          if (userIdFromToken) {\r\n            setUserId(userIdFromToken);\r\n            setUsername(usernameFromToken);\r\n          }\r\n        } catch (err) {\r\n          console.error(\"Lỗi khi giải mã token:\", err);\r\n        }\r\n      }\r\n    };\r\n\r\n    getUserInfoFromToken();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      try {\r\n        const res = await fetch(`https://api-zeal.onrender.com/api/products/${id}`);\r\n        if (!res.ok) throw new Error(\"Không thể tải sản phẩm\");\r\n        const data = await res.json();\r\n        setProduct(data);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Lỗi khi tải chi tiết sản phẩm:\", error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    const fetchComments = async () => {\r\n      try {\r\n        const res = await fetch(`https://api-zeal.onrender.com/api/comments/product/${id}`);\r\n        if (!res.ok) throw new Error(\"Không thể tải bình luận\");\r\n        const data = await res.json();\r\n        console.log(\"Comments data:\", data); // Debug dữ liệu bình luận\r\n        setComments(Array.isArray(data) ? data : []);\r\n      } catch (error) {\r\n        console.error(\"Lỗi khi lấy bình luận:\", error);\r\n        setComments([]);\r\n      }\r\n    };\r\n\r\n    if (id) {\r\n      fetchProduct();\r\n      fetchComments();\r\n    }\r\n  }, [id]);\r\n\r\n  const increaseQty = () => setQuantity((prev) => prev + 1);\r\n  const decreaseQty = () => setQuantity((prev) => (prev > 1 ? prev - 1 : 1));\r\n\r\n  const addToCart = async () => {\r\n    if (!product) return;\r\n\r\n    if (!userId) {\r\n      setCartMessage({\r\n        type: 'error',\r\n        text: 'Vui lòng đăng nhập để thêm sản phẩm vào giỏ hàng'\r\n      });\r\n\r\n      const cartItems = JSON.parse(localStorage.getItem(\"cart\") || \"[]\");\r\n      const existingItemIndex = cartItems.findIndex((item: any) => item.id === product._id);\r\n\r\n      if (existingItemIndex !== -1) {\r\n        cartItems[existingItemIndex].quantity += quantity;\r\n      } else {\r\n        cartItems.push({\r\n          id: product._id,\r\n          name: product.name,\r\n          price: product.discountPrice || product.price,\r\n          image: product.images?.[0] || \"\",\r\n          quantity,\r\n        });\r\n      }\r\n\r\n      localStorage.setItem(\"cart\", JSON.stringify(cartItems));\r\n      alert(\"Đã thêm vào giỏ hàng (localStorage)!\");\r\n      return;\r\n    }\r\n\r\n    setAddingToCart(true);\r\n\r\n    try {\r\n      const productId = product._id;\r\n      if (!productId) throw new Error(\"ID sản phẩm không hợp lệ\");\r\n\r\n      const response = await fetch(\r\n        `https://api-zeal.onrender.com/api/carts/add`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            userId: userId,\r\n            productId: productId,\r\n            quantity: quantity\r\n          }),\r\n        }\r\n      );\r\n\r\n      const responseData = await response.json();\r\n      if (!response.ok) throw new Error(responseData.message || \"Không thể thêm sản phẩm vào giỏ hàng\");\r\n\r\n      setCartMessage({\r\n        type: 'success',\r\n        text: 'Đã thêm sản phẩm vào giỏ hàng!'\r\n      });\r\n\r\n      setTimeout(() => setCartMessage(null), 3000);\r\n    } catch (error: any) {\r\n      console.error(\"Lỗi khi thêm vào giỏ hàng:\", error);\r\n      setCartMessage({\r\n        type: 'error',\r\n        text: `Lỗi: ${error.message}`\r\n      });\r\n    } finally {\r\n      setAddingToCart(false);\r\n    }\r\n  };\r\n\r\n  const submitComment = async () => {\r\n    if (!userId) {\r\n      setCommentError(\"Vui lòng đăng nhập để viết bình luận.\");\r\n      return;\r\n    }\r\n\r\n    if (!newComment.trim()) {\r\n      setCommentError(\"Bình luận không được để trống.\");\r\n      return;\r\n    }\r\n\r\n    setSubmittingComment(true);\r\n    setCommentError(null);\r\n\r\n    try {\r\n      const response = await fetch(`https://api-zeal.onrender.com/api/comments`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          userId: userId,\r\n          productId: id,\r\n          content: newComment,\r\n        }),\r\n      });\r\n\r\n      const responseData = await response.json();\r\n      console.log(\"New comment response:\", responseData); // Debug dữ liệu trả về\r\n      if (!response.ok) throw new Error(responseData.message || \"Không thể gửi bình luận.\");\r\n\r\n      // Thêm bình luận mới với thông tin từ token\r\n      setComments((prev) => [\r\n        {\r\n          _id: responseData._id,\r\n          user: { username: username }, // Sử dụng username từ token\r\n          content: newComment,\r\n          createdAt: new Date().toISOString(),\r\n        },\r\n        ...prev,\r\n      ]);\r\n      setNewComment(\"\");\r\n\r\n      // Gọi lại API để đồng bộ danh sách bình luận\r\n      const res = await fetch(`https://api-zeal.onrender.com/api/comments/product/${id}`);\r\n      if (res.ok) {\r\n        const updatedComments = await res.json();\r\n        setComments(Array.isArray(updatedComments) ? updatedComments : []);\r\n      }\r\n    } catch (error: any) {\r\n      setCommentError(`Lỗi: ${error.message}`);\r\n    } finally {\r\n      setSubmittingComment(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <p className=\"text-center py-10\">Đang tải chi tiết sản phẩm...</p>;\r\n  if (!product) return <p className=\"text-center py-10\">Không tìm thấy sản phẩm.</p>;\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.container}>\r\n        <section className={styles[\"product-section\"]}>\r\n          <div className={styles[\"product-thumbnails\"]}>\r\n            {product.images?.map((image, index) => (\r\n              <div\r\n                key={`thumbnail-${index}`}\r\n                className={`${styles.thumbnail} ${index === currentImageIndex ? styles.active : \"\"}`}\r\n                onClick={() => setCurrentImageIndex(index)}\r\n              >\r\n                <img\r\n                  src={getImageUrl(image)}\r\n                  alt={`${product.name} thumbnail ${index + 1}`}\r\n                />\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className={styles[\"product-image-container\"]}>\r\n            <div className={styles[\"product-main-image\"]}>\r\n              <img\r\n                src={getImageUrl(product.images?.[currentImageIndex] || \"\")}\r\n                alt={product.name}\r\n              />\r\n            </div>\r\n            <div className={styles[\"product-dots\"]}>\r\n              {product.images?.map((_, index) => (\r\n                <div\r\n                  key={`dot-${index}`}\r\n                  className={`${styles.dot} ${index === currentImageIndex ? styles.active : \"\"}`}\r\n                  onClick={() => setCurrentImageIndex(index)}\r\n                ></div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className={styles[\"product-info\"]}>\r\n            <h1 className={styles[\"product-title\"]}>{product.name}</h1>\r\n            <p className={styles[\"product-price\"]}>\r\n              {product.discountPrice ? (\r\n                <>\r\n                  <span className={styles[\"discount-price\"]}>{formatPrice(product.discountPrice)}</span>\r\n                  <span className={styles[\"original-price\"]}>{formatPrice(product.price)}</span>\r\n                  <span className={styles[\"discount-percent\"]}>\r\n                    {`-${Math.round(\r\n                      ((product.price - product.discountPrice) / product.price) * 100\r\n                    )}%`}\r\n                  </span>\r\n                </>\r\n              ) : (\r\n                <>{formatPrice(product.price)}</>\r\n              )}\r\n            </p>\r\n            <p className={styles[\"product-description\"]}>\r\n              {product.description || \"Chưa có mô tả cho sản phẩm này.\"}\r\n            </p>\r\n\r\n            <div className={styles[\"product-features\"]}>\r\n              {product.special?.map((feature, index) => (\r\n                <div key={`feature-${index}`} className={styles.feature}>\r\n                  {feature}\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className={styles[\"quantity-controls\"]}>\r\n              <div className={styles[\"quantity-wrapper\"]}>\r\n                <button className={`${styles[\"quantity-btn\"]} ${styles.decrease}`} onClick={decreaseQty}>\r\n                  −\r\n                </button>\r\n                <input\r\n                  type=\"text\"\r\n                  className={styles[\"quantity-input\"]}\r\n                  value={quantity}\r\n                  readOnly\r\n                />\r\n                <button className={`${styles[\"quantity-btn\"]} ${styles.increase}`} onClick={increaseQty}>\r\n                  +\r\n                </button>\r\n              </div>\r\n              <button \r\n                className={styles[\"add-to-cart\"]} \r\n                onClick={addToCart}\r\n                disabled={addingToCart}\r\n              >\r\n                {addingToCart ? 'Đang thêm...' : 'Thêm vào giỏ hàng'}\r\n              </button>\r\n            </div>\r\n\r\n            {cartMessage && (\r\n              <div className={`${styles[\"cart-message\"]} ${styles[cartMessage.type]}`}>\r\n                {cartMessage.text}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </section>\r\n\r\n        <div className={styles[\"product-info\"]}>\r\n          <h2 className={styles[\"product-info-title\"]}>Thông tin sản phẩm:</h2>\r\n          <h3 className={styles[\"ingredients-title\"]}>Thành phần:</h3>\r\n          <p>{product.ingredients?.join(\", \") || \"Không có thông tin thành phần.\"}</p>\r\n\r\n          <h3 className={styles[\"usage-title\"]}>Hướng dẫn sử dụng:</h3>\r\n          <ul className={styles[\"usage-list\"]}>\r\n            {product.usage_instructions?.map((instruction, index) => (\r\n              <li key={`instruction-${index}`} className={styles[\"usage-item\"]}>\r\n                {instruction}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles.cr}>\r\n        <div className={styles[\"customer-review\"]}>\r\n          <h1 className={styles[\"review-main-title\"]}>Đánh giá từ khách hàng</h1>\r\n\r\n          <div className={styles[\"write-review-section\"]}>\r\n            <h2 className={styles[\"review-title\"]}>Viết bình luận của bạn</h2>\r\n            <textarea\r\n              className={styles[\"comment-input\"]}\r\n              value={newComment}\r\n              onChange={(e) => setNewComment(e.target.value)}\r\n              placeholder=\"Nhập bình luận của bạn...\"\r\n              rows={4}\r\n            />\r\n            {commentError && (\r\n              <p className={styles[\"comment-error\"]}>{commentError}</p>\r\n            )}\r\n            <button\r\n              className={styles[\"submit-comment\"]}\r\n              onClick={submitComment}\r\n              disabled={submittingComment}\r\n            >\r\n              {submittingComment ? \"Đang gửi...\" : \"Gửi bình luận\"}\r\n            </button>\r\n          </div>\r\n\r\n          {comments.length > 0 ? (\r\n            comments.map((comment, index) => (\r\n              <div key={comment._id || `comment-${index}`} className={styles.review}>\r\n                <h2 className={styles[\"review-title\"]}>{comment.user?.username || \"Ẩn danh\"}</h2>\r\n                <span className={styles[\"review-date\"]}>\r\n                  Ngày: {new Date(comment.createdAt).toLocaleDateString(\"vi-VN\")}\r\n                </span>\r\n                <p className={styles.comment}>{comment.content}</p>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <p>Chưa có bình luận nào cho sản phẩm này.</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <section className={styles[\"product-contact-section\"]}>\r\n        <h2 className={styles[\"contact-section-title\"]}>\r\n          Không tìm thấy được dòng sản phẩm mà bạn cần<br />hoặc thích hợp với da của bạn?\r\n        </h2>\r\n        <button className={styles[\"contact-button\"]}>Liên hệ với chúng tôi</button>\r\n      </section>\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 730, "column": 0}, "map": {"version":3,"sources":["file://F%3A/REACT/DU%20AN%20TN/Pure-Botanica/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
>>>>>>> c9215392f51e2486d4f2e69aee35a053e36b5441
>>>>>>> 37338bcc210a364497f6fb6b2ac1294e0de20174
>>>>>>> 4261d9e36523872a9a52b6d1b98306fa8fb2c489
}